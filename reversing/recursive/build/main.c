#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// clang-format off
static char table[512] = {'c', 't', '`', '*', 'f', '4', '(', '+', 'b', 'c', '9', '5', '"', '.', '8', '1', 'b', '{', 'h', 'm', 'r', '3', 'c', '/', '}', 'r', '@', ':', '{', '&', ';', '5', '1', '4', 'o', 'd', '*', '<', 'h', ',', 'n', '\'', 'd', 'm', 'x', 'w', '?', 'l', 'e', 'g', '(', 'y', 'o', ')', 'n', 'e', '+', 'j', '-', '{', '(', '`', 'q', '/', 'r', 'r', '3', '|', '(', '$', '0', '+', '5', 's', '.', 'z', '{', '_', 'n', 'c', 'a', 'u', 'r', '$', '{', 's', '1', 'v', '5', '%', '!', 'p', ')', 'h', '!', 'q', '\'', 't', '<', '=', 'l', '@', '_', '8', 'h', '9', '3', '_', 'w', 'o', 'c', '4', 'l', 'd', '%', '>', '?', 'c', 'b', 'a', '<', 'd', 'a', 'g', 'x', '|', 'l', '<', 'b', '/', 'y', ',', 'y', '`', 'k', '-', '7', '{', '=', ';', '{', '&', '8', ',', '8', 'u', '5', '$', 'k', 'k', 'c', '}', '@', '7', 'q', '@', '<', 't', 'm', '0', '3', ':', '&', ',', 'f', '1', 'v', 'y', 'b', '\'', '8', '%', 'd', 'y', 'l', '2', '(', 'g', '?', '7', '1', '7', 'q', '#', 'u', '>', 'f', 'w', '(', ')', 'v', 'o', 'o', '$', '6', 'g', ')', ':', ')', '_', 'c', '_', '+', '8', 'v', '.', 'g', 'b', 'm', '(', '%', '$', 'w', '(', '<', 'h', ':', '1', '!', 'c', '\'', 'r', 'u', 'v', '}', '@', '3', '`', 'y', 'a', '!', 'r', '5', '&', ';', '5', 'z', '_', 'o', 'g', 'm', '0', 'a', '9', 'c', '2', '3', 's', 'm', 'w', '-', '.', 'i', '#', '|', 'w', '{', '8', 'k', 'e', 'p', 'f', 'v', 'w', ':', '3', '|', '3', 'f', '5', '<', 'e', '@', ':', '}', '*', ',', 'q', '>', 's', 'g', '!', 'b', 'd', 'k', 'r', '0', 'x', '7', '@', '>', 'h', '/', '5', '*', 'h', 'i', '<', '7', '4', '9', '\'', '|', '{', ')', 's', 'j', '1', ';', '0', ',', '$', 'i', 'g', '&', 'v', ')', '=', 't', '0', 'f', 'n', 'k', '|', '0', '3', 'j', '"', '}', '7', 'r', '{', '}', 't', 'i', '}', '?', '_', '<', 's', 'w', 'x', 'j', 'u', '1', 'k', '!', 'l', '&', 'd', 'b', '!', 'j', ':', '}', '!', 'z', '}', '6', '*', '`', '1', '_', '{', 'f', '1', 's', '@', '3', 'd', ',', 'v', 'i', 'o', '4', '5', '<', '_', '4', 'v', 'c', '_', 'v', '3', '>', 'h', 'u', '3', '>', '+', 'b', 'y', 'v', 'q', '#', '#', '@', 'f', '+', ')', 'l', 'c', '9', '1', 'w', '+', '9', 'i', '7', '#', 'v', '<', 'r', ';', 'r', 'r', '$', 'u', '@', '(', 'a', 't', '>', 'v', 'n', ':', '7', 'b', '`', 'j', 's', 'm', 'g', '6', 'm', 'y', '{', '+', '9', 'm', '_', '-', 'r', 'y', 'p', 'p', '_', 'u', '5', 'n', '*', '6', '.', '}', 'f', '8', 'p', 'p', 'g', '<', 'm', '-', '&', 'q', 'q', '5', 'k', '3', 'f', '?', '=', 'u', '1', '}', 'm', '_', '?', 'n', '9', '<', '|', 'e', 't', '*', '-', '/', '%', 'f', 'g', 'h', '.', '1', 'm', '(', '@', '_', '3', 'v', 'f', '4', 'i', '(', 'n', ')', 's', '2', 'j', 'v', 'g', '0', 'm', '4'};
// clang-format on

int show_description(void) {
  puts("");
  puts("   ▄▀▀▄▀▀▀▄  ▄▀▀█▄▄▄▄  ▄▀▄▄▄▄   ▄▀▀▄ ▄▀▀▄  ▄▀▀▄▀▀▀▄  ▄▀▀▀▀▄  ▄▀▀█▀▄   ▄▀▀▄ ▄▀▀▄  ▄▀▀█▄▄▄▄ ");
  puts("  █   █   █ ▐  ▄▀   ▐ █ █    ▌ █   █    █ █   █   █ █ █   ▐ █   █  █ █   █    █ ▐  ▄▀   ▐ ");
  puts("  ▐  █▀▀█▀    █▄▄▄▄▄  ▐ █      ▐  █    █  ▐  █▀▀█▀     ▀▄   ▐   █  ▐ ▐  █    █    █▄▄▄▄▄  ");
  puts("   ▄▀    █    █    ▌    █        █    █    ▄▀    █  ▀▄   █      █       █   ▄▀    █    ▌  ");
  puts("  █     █    ▄▀▄▄▄▄    ▄▀▄▄▄▄▀    ▀▄▄▄▄▀  █     █    █▀▀▀    ▄▀▀▀▀▀▄     ▀▄▀     ▄▀▄▄▄▄   ");
  puts("  ▐     ▐    █    ▐   █     ▐             ▐     ▐    ▐      █       █            █    ▐   ");
  puts("             ▐        ▐                                     ▐       ▐            ▐        ");
  puts("");
}

int check(char *flag, int n) {
  int l = strlen(flag);
  if (l == 1) {
    // printf("%d, %s\n", n, flag);
    if (table[n] != flag[0]) {
      return 1;
    }
  } else {
    int r;
    int t = l / 2;

    char *flag_f = malloc(t);
    strncpy(flag_f, flag, t);
    r = check(flag_f, n);
    if (r == 1) {
      return 1;
    }

    char *flag_e = malloc(l - t);
    strncpy(flag_e, flag + t, l - t);
    r = check(flag_e, n + t * t);
    if (r == 1) {
      return 1;
    }
  }
  return 0;
}

int main(void) {
  show_description();

  char input[60];
  printf("FLAG: ");
  scanf("%39s%*[^\n]", input);

  if (strlen(input) != 38) {
    puts("Incorrect.");
    return 1;
  }

  int r = check(input, 0);
  if (r == 1) {
    puts("Incorrect.");
    return 1;
  }
  puts("Correct!");
  return 0;
}
